<Window x:Class="MergeFilesWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Merge Files"
        Icon="app.ico"
        Height="700" Width="1100"
        MinHeight="500" MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E2E"
        AllowDrop="True"
        Drop="Window_Drop"
        DragOver="Window_DragOver"
        DragLeave="Window_DragLeave">

    <Window.Resources>
        <!-- Primary Colors -->
        <Color x:Key="PrimaryColor">#7C3AED</Color>
        <Color x:Key="PrimaryHoverColor">#8B5CF6</Color>
        <Color x:Key="SecondaryColor">#06B6D4</Color>
        <Color x:Key="BackgroundColor">#1E1E2E</Color>
        <Color x:Key="SurfaceColor">#2D2D3F</Color>
        <Color x:Key="SurfaceHoverColor">#3D3D4F</Color>
        <Color x:Key="TextColor">#E4E4E7</Color>
        <Color x:Key="TextMutedColor">#A1A1AA</Color>
        <Color x:Key="SuccessColor">#10B981</Color>
        <Color x:Key="WarningColor">#F59E0B</Color>
        <Color x:Key="DangerColor">#EF4444</Color>

        <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource PrimaryColor}"/>
        <SolidColorBrush x:Key="PrimaryHoverBrush" Color="{StaticResource PrimaryHoverColor}"/>
        <SolidColorBrush x:Key="SecondaryBrush" Color="{StaticResource SecondaryColor}"/>
        <SolidColorBrush x:Key="BackgroundBrush" Color="{StaticResource BackgroundColor}"/>
        <SolidColorBrush x:Key="SurfaceBrush" Color="{StaticResource SurfaceColor}"/>
        <SolidColorBrush x:Key="SurfaceHoverBrush" Color="{StaticResource SurfaceHoverColor}"/>
        <SolidColorBrush x:Key="TextBrush" Color="{StaticResource TextColor}"/>
        <SolidColorBrush x:Key="TextMutedBrush" Color="{StaticResource TextMutedColor}"/>
        <SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessColor}"/>
        <SolidColorBrush x:Key="WarningBrush" Color="{StaticResource WarningColor}"/>
        <SolidColorBrush x:Key="DangerBrush" Color="{StaticResource DangerColor}"/>

        <!-- Primary Button Style -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Secondary Button Style -->
        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#3F3F5F"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource SurfaceHoverBrush}"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Danger Button Style -->
        <Style x:Key="DangerButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource DangerBrush}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource DangerBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource DangerBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Config Button Style -->
        <Style x:Key="ConfigButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#3F3F5F"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource SurfaceBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- TextBox Style -->
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderBrush" Value="#3F3F5F"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="CaretBrush" Value="{StaticResource TextBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost"
                                          Margin="{TemplateBinding Padding}"
                                          VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ListBox Style -->
        <Style x:Key="ModernListBoxStyle" TargetType="ListBox">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderBrush" Value="#3F3F5F"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="4"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ScrollViewer Padding="{TemplateBinding Padding}">
                                <ItemsPresenter/>
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ListBoxItem Style -->
        <Style x:Key="ModernListBoxItemStyle" TargetType="ListBoxItem">
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="border"
                                Background="Transparent"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#3D3D4F"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#4C1D95"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0">
                <TextBlock Text="Merge Files"
                           FontSize="28"
                           FontWeight="Bold"
                           Foreground="{StaticResource TextBrush}"/>
                <TextBlock Text="Drag and drop files or add a folder"
                           FontSize="14"
                           Foreground="{StaticResource TextMutedBrush}"
                           Margin="0,4,0,0"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                <Button Content="Add Folder"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Click="BtnAddFolder_Click"
                        Margin="0,0,10,0"/>
                <Button x:Name="btnMerge"
                        Content="Merge"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Click="BtnMerge_Click"/>
            </StackPanel>
        </Grid>

        <!-- File List Area -->
        <Border Grid.Row="1"
                x:Name="dropZone"
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="#3F3F5F"
                BorderThickness="2"
                CornerRadius="12"
                Margin="0,0,0,16">
            <Grid>
                <!-- Empty State -->
                <StackPanel x:Name="emptyState"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Visibility="Visible">
                    <Border Width="80" Height="80"
                            Background="#3D3D4F"
                            CornerRadius="40"
                            HorizontalAlignment="Center"
                            Margin="0,0,0,16">
                        <TextBlock Text="ðŸ“"
                                   FontSize="36"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock Text="Drag files or folders here"
                               FontSize="18"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextBrush}"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="or use the 'Add Folder' button above"
                               FontSize="14"
                               Foreground="{StaticResource TextMutedBrush}"
                               HorizontalAlignment="Center"
                               Margin="0,8,0,0"/>
                </StackPanel>

                <!-- Drag Over Indicator -->
                <Border x:Name="dragOverlay"
                        Background="#4C1D95"
                        Opacity="0"
                        CornerRadius="10"
                        Margin="2">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="ðŸ“¥" FontSize="48" HorizontalAlignment="Center"/>
                        <TextBlock Text="Drop files here"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   Foreground="White"
                                   HorizontalAlignment="Center"
                                   Margin="0,12,0,0"/>
                    </StackPanel>
                </Border>

                <!-- File List -->
                <ListBox x:Name="lstFiles"
                         Style="{StaticResource ModernListBoxStyle}"
                         ItemContainerStyle="{StaticResource ModernListBoxItemStyle}"
                         SelectionMode="Extended"
                         Background="Transparent"
                         BorderThickness="0"
                         Visibility="Collapsed"/>
            </Grid>
        </Border>

        <!-- Info Bar -->
        <Grid Grid.Row="2" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- File Count -->
            <Border Grid.Column="0"
                    Background="{StaticResource SurfaceBrush}"
                    CornerRadius="6"
                    Padding="12,8"
                    Margin="0,0,12,0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ“„" FontSize="14" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBlock x:Name="lblCount"
                               Text="0 files"
                               Foreground="{StaticResource TextBrush}"
                               FontSize="13"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- Prefix Input -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="File name prefix:"
                           Foreground="{StaticResource TextMutedBrush}"
                           FontSize="13"
                           VerticalAlignment="Center"
                           Margin="0,0,10,0"/>
                <TextBox x:Name="txtPrefix"
                         Text="MergedFiles"
                         Width="180"
                         Style="{StaticResource ModernTextBoxStyle}"/>
            </StackPanel>

            <!-- Spacer -->
            <Border Grid.Column="2"/>

            <!-- Action Buttons -->
            <StackPanel Grid.Column="3" Orientation="Horizontal" Margin="0,0,12,0">
                <Button Content="Remove Selected"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Click="BtnRemoveSelected_Click"
                        Margin="0,0,8,0"/>
                <Button Content="Clear"
                        Style="{StaticResource DangerButtonStyle}"
                        Click="BtnClear_Click"/>
            </StackPanel>
        </Grid>

        <!-- Config Buttons -->
        <Border Grid.Row="3"
                Background="{StaticResource SurfaceBrush}"
                CornerRadius="8"
                Padding="16,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="Config files:"
                           Foreground="{StaticResource TextMutedBrush}"
                           FontSize="13"
                           VerticalAlignment="Center"
                           Margin="0,0,16,0"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="ðŸ“ allow.txt"
                            Style="{StaticResource ConfigButtonStyle}"
                            Click="BtnEditAllow_Click"
                            ToolTip="Allowed file extensions"
                            Margin="0,0,8,0"/>
                    <Button Content="ðŸš« ignore.txt"
                            Style="{StaticResource ConfigButtonStyle}"
                            Click="BtnEditIgnore_Click"
                            ToolTip="Folders to exclude"
                            Margin="0,0,8,0"/>
                    <Button Content="âœ… include.txt"
                            Style="{StaticResource ConfigButtonStyle}"
                            Click="BtnEditInclude_Click"
                            ToolTip="Override ignore rules"/>
                </StackPanel>

                <TextBlock Grid.Column="2"
                           Text="v1.0 WPF"
                           Foreground="#4F4F5F"
                           FontSize="11"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
</Window>
